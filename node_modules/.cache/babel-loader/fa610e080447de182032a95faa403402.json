{"ast":null,"code":"import { REGISTER_FAIL, LOGIN_FAIL, LOGIN_SUCCESS, SIGN_OUT, REGISTERSUCCESS, USER_LOADING, USER_LOADED, AUTH_ERROR } from './types';\nimport { returnError } from './errorAction';\nimport connect from '../routes/connect';\nimport Axios from 'axios';\nimport { getMessage } from './msgAction';\nexport const loadUser = () => (dispatch, getState) => {\n  dispatch({\n    type: USER_LOADING\n  });\n  Axios.get('http://localhost:5000/api/users/auth', configToken(getState)).then(res => {\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data\n    });\n    console.log(res.data);\n  }).catch(err => {\n    dispatch(returnError(err.response.data, 'AUTH_ERROR'));\n    dispatch({\n      type: AUTH_ERROR\n    });\n  });\n};\nexport const signIn = formValues => {\n  return dispatch => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const body = JSON.stringify(formValues);\n    Axios.post('http://localhost:5000/api/users/login', body, config).then(res => {\n      dispatch(getMessage(res.data.message, 'LOGIN_SUCCESS'));\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: res.data\n      });\n      console.log(res.data);\n    }).catch(err => {\n      dispatch(returnError(err.response.data.errorMessage, 'LOGIN_FAIL'));\n      dispatch({\n        type: LOGIN_FAIL\n      });\n    });\n  };\n};\nexport const register = formValues => {\n  return dispatch => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const body = JSON.stringify(formValues);\n\n    if (formValues.password !== formValues.repassword) {\n      dispatch(returnError('Password did not Match', 'REGISTER_FAIL'));\n      dispatch({\n        type: REGISTER_FAIL\n      });\n    } else {\n      Axios.post('http://localhost:5000/api/users/register', body, config).then(res => {\n        dispatch(getMessage(res.data.message, 'REGISTERSUCCESS'));\n        dispatch({\n          type: REGISTERSUCCESS,\n          payload: res.data\n        });\n      }).catch(err => {\n        dispatch(returnError(err.response.data.errorMessage, 'REGISTER_FAIL'));\n        dispatch({\n          type: REGISTER_FAIL\n        });\n      });\n    }\n  };\n};\nexport const logout = () => {\n  return {\n    type: SIGN_OUT\n  };\n};\nexport const configToken = getState => {\n  const token = getState().auth.token;\n  console.log(token);\n  return token;\n};","map":{"version":3,"sources":["C:/Users/KIIT/Documents/Projects/OPEN/DevLearn/client/src/actions/index.js"],"names":["REGISTER_FAIL","LOGIN_FAIL","LOGIN_SUCCESS","SIGN_OUT","REGISTERSUCCESS","USER_LOADING","USER_LOADED","AUTH_ERROR","returnError","connect","Axios","getMessage","loadUser","dispatch","getState","type","get","configToken","then","res","payload","data","console","log","catch","err","response","signIn","formValues","config","headers","body","JSON","stringify","post","message","errorMessage","register","password","repassword","logout","token","auth"],"mappings":"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","sourcesContent":["import {\r\n  REGISTER_FAIL,\r\n  LOGIN_FAIL,\r\n  LOGIN_SUCCESS,\r\n  SIGN_OUT,\r\n  REGISTERSUCCESS,\r\n  USER_LOADING,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n} from './types';\r\n\r\nimport { returnError } from './errorAction';\r\n\r\nimport connect from '../routes/connect';\r\nimport Axios from 'axios';\r\nimport { getMessage } from './msgAction';\r\n\r\nexport const loadUser = () => (dispatch, getState) => {\r\n  dispatch({ type: USER_LOADING });\r\n  Axios.get('http://localhost:5000/api/users/auth', configToken(getState))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: USER_LOADED,\r\n        payload: res.data,\r\n      });\r\n      console.log(res.data);\r\n    })\r\n    .catch((err) => {\r\n      dispatch(returnError(err.response.data, 'AUTH_ERROR'));\r\n      dispatch({ type: AUTH_ERROR });\r\n    });\r\n};\r\n\r\nexport const signIn = (formValues) => {\r\n  return (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n    const body = JSON.stringify(formValues);\r\n    Axios.post('http://localhost:5000/api/users/login', body, config)\r\n      .then((res) => {\r\n        dispatch(getMessage(res.data.message, 'LOGIN_SUCCESS'));\r\n        dispatch({\r\n          type: LOGIN_SUCCESS,\r\n          payload: res.data,\r\n        });\r\n        console.log(res.data);\r\n      })\r\n      .catch((err) => {\r\n        dispatch(returnError(err.response.data.errorMessage, 'LOGIN_FAIL'));\r\n        dispatch({\r\n          type: LOGIN_FAIL,\r\n        });\r\n      });\r\n  };\r\n};\r\n\r\nexport const register = (formValues) => {\r\n  return (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n\r\n    const body = JSON.stringify(formValues);\r\n    if (formValues.password !== formValues.repassword) {\r\n      dispatch(returnError('Password did not Match', 'REGISTER_FAIL'));\r\n      dispatch({\r\n        type: REGISTER_FAIL,\r\n      });\r\n    } else {\r\n      Axios.post('http://localhost:5000/api/users/register', body, config)\r\n        .then((res) => {\r\n          dispatch(getMessage(res.data.message, 'REGISTERSUCCESS'));\r\n          dispatch({\r\n            type: REGISTERSUCCESS,\r\n            payload: res.data,\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          dispatch(\r\n            returnError(err.response.data.errorMessage, 'REGISTER_FAIL')\r\n          );\r\n          dispatch({\r\n            type: REGISTER_FAIL,\r\n          });\r\n        });\r\n    }\r\n  };\r\n};\r\n\r\nexport const logout = () => {\r\n  return {\r\n    type: SIGN_OUT,\r\n  };\r\n};\r\n\r\nexport const configToken = (getState) => {\r\n  const token = getState().auth.token;\r\n  console.log(token);\r\n  return token;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}