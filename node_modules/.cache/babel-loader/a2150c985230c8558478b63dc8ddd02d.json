{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\OPEN\\\\DevLearn\\\\client\\\\src\\\\components\\\\Blog\\\\Upload Page\\\\UploadBlogPage.js\";\nimport React, { useState, useEffect } from 'react';\n\nfunction UploadBlogPage() {\n  const myHeaders = new Headers();\n  myHeaders.append('Content-Type', 'application/json');\n  myHeaders.append('end-auth', `${localStorage.getItem('token')}`);\n  useEffect(() => {\n    console.log(myHeaders);\n    fetch('/api/users/auth', {\n      method: 'GET',\n      headers: myHeaders\n    }).then(res => res.json()).then(data => {\n      if (data.isAuth) {\n        setisAuth(true);\n        setMessage(data.message);\n      } else {\n        setisAuth(false);\n        setMessage(data.errorMessage);\n      }\n    }).catch(err => {});\n  }, []);\n  const [Permalink, setPermalink] = useState('');\n  const [Title, setTitle] = useState('');\n  const [Content, setContent] = useState('');\n  const [Message, setMessage] = useState(null);\n  const [isAuth, setisAuth] = useState(false);\n  const [PostSuccess, setPostSuccess] = useState(null);\n\n  const handleChangePermalink = event => {\n    setPermalink(event.currentTarget.value);\n  };\n\n  const handleChangeTitle = event => {\n    setTitle(event.currentTarget.value);\n  };\n\n  const handleChangeContent = event => {\n    setContent(event.currentTarget.value);\n  };\n\n  const toggle = () => {\n    // Clear Error\n    setMessage(null);\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n\n    if (!isAuth) {\n      setMessage('Please Login First');\n    }\n\n    if (Title === '' || Permalink === '' || Content === '') {\n      setMessage('Fill the Blog Data Please');\n    }\n\n    const variables = {\n      title: Title,\n      permalink: Permalink,\n      content: Content\n    };\n    await fetch('/api/blog/upload', {\n      method: 'POST',\n      headers: myHeaders,\n      body: JSON.stringify(variables)\n    }).then(res => res.json()).then(data => {\n      if (data.success) {\n        setPostSuccess(true);\n        setMessage(data.message);\n      } else {\n        setPostSuccess(false);\n        setMessage(data.errorMessage);\n      }\n    });\n  };\n\n  const onPublish = event => {\n    event.preventDefault();\n    const variables = {\n      permalink: Permalink\n    };\n    fetch('/api/blog/publish', {\n      method: 'POST',\n      headers: myHeaders,\n      body: JSON.stringify(variables)\n    }).then(res => res.json()).then(data => {\n      if (data.success) {\n        setMessage(data.message);\n      } else {\n        setMessage(data.errorMessage);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, Message ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"absolute right-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-end \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-4  py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${Message ? 'bg-green-100 border border-green-400 text-green-700' : 'bg-red-100 border border-red-400 text-red-700'} px-4 py-3 rounded relative`,\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"block sm:inline mr-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, Message), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"absolute top-0 bottom-0 right-0 px-4 py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"fill-current h-6 w-6 text-red-500\",\n    role: \"button\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    onClick: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 23\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 23\n    }\n  })))))))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-6 mb-20 w-2/3 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center border-b-2 text-6xl font-ubuntu font-hairline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, \"Blog Upload\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    className: \"w-3/5 mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-1/6 mx-4 mx-auto mt-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \" text-white rounded-lg text-2xl flex justify-center flex-col p-6 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onSubmit,\n    className: \"border border-blue-300 bg-blue-400 rounded px-4 py-1 m-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onPublish,\n    className: \"border border-blue-300 bg-blue-400 rounded px-4 py-1 m-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, \"Publish\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-5/6 mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-3xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"Permalink\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChangePermalink,\n    name: \"permalink\",\n    type: \"text\",\n    className: \"border appearance-none border-gray-300 rounded text-gray-700 focus:outline-none focus:shadow-outline py-2 px-4 shadow w-full text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-3xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChangeTitle,\n    name: \"title\",\n    type: \"text\",\n    className: \"border appearance-none border-gray-300 rounded text-gray-700 focus:outline-none focus:shadow-outline py-2 px-4 shadow w-full text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-3xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, \"Content\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-4 mb-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"content\",\n    onChange: handleChangeContent,\n    className: \"h-64 border appearance-none border-gray-300 rounded text-gray-700 focus:outline-none focus:shadow-outline py-2 px-4 shadow w-full text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  }))))))));\n}\n\nexport default UploadBlogPage;","map":{"version":3,"sources":["D:/Projects/OPEN/DevLearn/client/src/components/Blog/Upload Page/UploadBlogPage.js"],"names":["React","useState","useEffect","UploadBlogPage","myHeaders","Headers","append","localStorage","getItem","console","log","fetch","method","headers","then","res","json","data","isAuth","setisAuth","setMessage","message","errorMessage","catch","err","Permalink","setPermalink","Title","setTitle","Content","setContent","Message","PostSuccess","setPostSuccess","handleChangePermalink","event","currentTarget","value","handleChangeTitle","handleChangeContent","toggle","onSubmit","preventDefault","variables","title","permalink","content","body","JSON","stringify","success","onPublish"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction UploadBlogPage() {\r\n  const myHeaders = new Headers();\r\n  myHeaders.append('Content-Type', 'application/json');\r\n  myHeaders.append('end-auth', `${localStorage.getItem('token')}`);\r\n\r\n  useEffect(() => {\r\n    console.log(myHeaders);\r\n    fetch('/api/users/auth', {\r\n      method: 'GET',\r\n      headers: myHeaders,\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.isAuth) {\r\n          setisAuth(true);\r\n          setMessage(data.message);\r\n        } else {\r\n          setisAuth(false);\r\n          setMessage(data.errorMessage);\r\n        }\r\n      })\r\n      .catch((err) => {});\r\n  }, []);\r\n\r\n  const [Permalink, setPermalink] = useState('');\r\n  const [Title, setTitle] = useState('');\r\n  const [Content, setContent] = useState('');\r\n  const [Message, setMessage] = useState(null);\r\n  const [isAuth, setisAuth] = useState(false);\r\n  const [PostSuccess, setPostSuccess] = useState(null);\r\n\r\n  const handleChangePermalink = (event) => {\r\n    setPermalink(event.currentTarget.value);\r\n  };\r\n\r\n  const handleChangeTitle = (event) => {\r\n    setTitle(event.currentTarget.value);\r\n  };\r\n  const handleChangeContent = (event) => {\r\n    setContent(event.currentTarget.value);\r\n  };\r\n\r\n  const toggle = () => {\r\n    // Clear Error\r\n\r\n    setMessage(null);\r\n  };\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (!isAuth) {\r\n      setMessage('Please Login First');\r\n    }\r\n\r\n    if (Title === '' || Permalink === '' || Content === '') {\r\n      setMessage('Fill the Blog Data Please');\r\n    }\r\n\r\n    const variables = {\r\n      title: Title,\r\n      permalink: Permalink,\r\n      content: Content,\r\n    };\r\n\r\n    await fetch('/api/blog/upload', {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      body: JSON.stringify(variables),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.success) {\r\n          setPostSuccess(true);\r\n          setMessage(data.message);\r\n        } else {\r\n          setPostSuccess(false);\r\n          setMessage(data.errorMessage);\r\n        }\r\n      });\r\n  };\r\n\r\n  const onPublish = (event) => {\r\n    event.preventDefault();\r\n    const variables = {\r\n      permalink: Permalink,\r\n    };\r\n\r\n    fetch('/api/blog/publish', {\r\n      method: 'POST',\r\n      headers: myHeaders,\r\n      body: JSON.stringify(variables),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.success) {\r\n          setMessage(data.message);\r\n        } else {\r\n          setMessage(data.errorMessage);\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {Message ? (\r\n        <div>\r\n          <div className='absolute right-0'>\r\n            <div className='flex justify-end '>\r\n              <div className='px-4  py-2'>\r\n                <div\r\n                  className={`${\r\n                    Message\r\n                      ? 'bg-green-100 border border-green-400 text-green-700'\r\n                      : 'bg-red-100 border border-red-400 text-red-700'\r\n                  } px-4 py-3 rounded relative`}\r\n                  role='alert'>\r\n                  <span className='block sm:inline mr-6'>{Message}</span>\r\n                  <span className='absolute top-0 bottom-0 right-0 px-4 py-3'>\r\n                    <svg\r\n                      className='fill-current h-6 w-6 text-red-500'\r\n                      role='button'\r\n                      xmlns='http://www.w3.org/2000/svg'\r\n                      viewBox='0 0 20 20'\r\n                      onClick={toggle}>\r\n                      <title>Close</title>\r\n                      <path d='M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z' />\r\n                    </svg>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n      <div className='mt-6 mb-20 w-2/3 mx-auto'>\r\n        <h1 className='text-center border-b-2 text-6xl font-ubuntu font-hairline'>\r\n          Blog Upload\r\n        </h1>\r\n      </div>\r\n      <div className='flex'>\r\n        <form onSubmit={onSubmit} className='w-3/5 mx-auto'>\r\n          <div className='flex'>\r\n            <div className='w-1/6 mx-4 mx-auto mt-4 '>\r\n              <div className=' text-white rounded-lg text-2xl flex justify-center flex-col p-6 text-white'>\r\n                <button\r\n                  onClick={onSubmit}\r\n                  className='border border-blue-300 bg-blue-400 rounded px-4 py-1 m-4'>\r\n                  Save\r\n                </button>\r\n                <button\r\n                  onClick={onPublish}\r\n                  className='border border-blue-300 bg-blue-400 rounded px-4 py-1 m-4'>\r\n                  Publish\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='w-5/6 mx-4'>\r\n              <div>\r\n                <label className='text-3xl'>Permalink</label>\r\n                <div className='my-4'>\r\n                  <input\r\n                    onChange={handleChangePermalink}\r\n                    name='permalink'\r\n                    type='text'\r\n                    className='border appearance-none border-gray-300 rounded text-gray-700 focus:outline-none focus:shadow-outline py-2 px-4 shadow w-full text-lg'\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className='my-8'>\r\n                <label className='text-3xl'>Title</label>\r\n                <div className='my-4'>\r\n                  <input\r\n                    onChange={handleChangeTitle}\r\n                    name='title'\r\n                    type='text'\r\n                    className='border appearance-none border-gray-300 rounded text-gray-700 focus:outline-none focus:shadow-outline py-2 px-4 shadow w-full text-lg'\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className='my-8'>\r\n                <label className='text-3xl'>Content</label>\r\n                <div className='my-4 mb-12'>\r\n                  <textarea\r\n                    name='content'\r\n                    onChange={handleChangeContent}\r\n                    className='h-64 border appearance-none border-gray-300 rounded text-gray-700 focus:outline-none focus:shadow-outline py-2 px-4 shadow w-full text-lg'\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UploadBlogPage;\r\n"]},"metadata":{},"sourceType":"module"}