{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\KIIT\\\\Documents\\\\Projects\\\\OPEN\\\\DevLearn\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\KIIT\\\\Documents\\\\Projects\\\\OPEN\\\\DevLearn\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{REGISTER_FAIL,LOGIN_FAIL,LOGIN_SUCCESS,SIGN_OUT,REGISTERSUCCESS,USER_LOADING,USER_LOADED,AUTH_ERROR,GOOGLE_SIGN_IN,GOOGLE_SIGN_OUT}from'./types';import{returnError}from'./errorAction';import connect from'../routes/connect';import Axios from'axios';import{getMessage}from'./msgAction';import{browserHistory}from'../components/Header/Header';export var loadUser=function loadUser(){return function(dispatch){dispatch({type:USER_LOADING});Axios.get('http://localhost:5000/api/users/auth').then(function(res){dispatch({type:USER_LOADED,payload:res.data});console.log(res.data);}).catch(function(err){console.log(err);dispatch(returnError(err.response.data,'AUTH_ERROR'));dispatch({type:AUTH_ERROR});});};};export var signIn=function signIn(userId){return{type:GOOGLE_SIGN_IN,payload:userId};};export var signOut=function signOut(){return{type:GOOGLE_SIGN_OUT};};export var login=function login(formValues){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify(formValues);_context.next=4;return Axios.post('/api/users/login',body,config).then(function(res){dispatch(getMessage(res.data.message,'LOGIN_SUCCESS'));dispatch({type:LOGIN_SUCCESS,payload:res.data});}).catch(function(err){dispatch(returnError(err.response.data.errorMessage,'LOGIN_FAIL'));dispatch({type:LOGIN_FAIL});});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var register=function register(formValues){return function(dispatch){var config={headers:{'Content-Type':'application/json'}};var body=JSON.stringify(formValues);if(formValues.password!==formValues.repassword){dispatch(returnError('Password did not Match','REGISTER_FAIL'));dispatch({type:REGISTER_FAIL});}else{Axios.post('/api/users/register',body,config).then(function(res){dispatch(getMessage(res.data.message,'REGISTERSUCCESS'));dispatch({type:REGISTERSUCCESS,payload:res.data});}).catch(function(err){dispatch(returnError(err.response.data.errorMessage,'REGISTER_FAIL'));dispatch({type:REGISTER_FAIL});});}};};export var logout=function logout(){return function(dispatch){dispatch({type:SIGN_OUT});};};export var configToken=function configToken(getState){var token=getState().auth.token;// Headers\nvar config={headers:{'Content-type':'application/json'}};//If Token, add to headers\nif(token){config.headers['end_auth']=token;}return config;};","map":{"version":3,"sources":["C:/Users/KIIT/Documents/Projects/OPEN/DevLearn/client/src/actions/index.js"],"names":["REGISTER_FAIL","LOGIN_FAIL","LOGIN_SUCCESS","SIGN_OUT","REGISTERSUCCESS","USER_LOADING","USER_LOADED","AUTH_ERROR","GOOGLE_SIGN_IN","GOOGLE_SIGN_OUT","returnError","connect","Axios","getMessage","browserHistory","loadUser","dispatch","type","get","then","res","payload","data","console","log","catch","err","response","signIn","userId","signOut","login","formValues","config","headers","body","JSON","stringify","post","message","errorMessage","register","password","repassword","logout","configToken","getState","token","auth"],"mappings":"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","sourcesContent":["import {\r\n  REGISTER_FAIL,\r\n  LOGIN_FAIL,\r\n  LOGIN_SUCCESS,\r\n  SIGN_OUT,\r\n  REGISTERSUCCESS,\r\n  USER_LOADING,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  GOOGLE_SIGN_IN,\r\n  GOOGLE_SIGN_OUT,\r\n} from './types';\r\n\r\nimport { returnError } from './errorAction';\r\n\r\nimport connect from '../routes/connect';\r\nimport Axios from 'axios';\r\nimport { getMessage } from './msgAction';\r\nimport { browserHistory } from '../components/Header/Header';\r\n\r\nexport const loadUser = () => (dispatch) => {\r\n  dispatch({ type: USER_LOADING });\r\n  Axios.get('http://localhost:5000/api/users/auth')\r\n    .then((res) => {\r\n      dispatch({\r\n        type: USER_LOADED,\r\n        payload: res.data,\r\n      });\r\n      console.log(res.data);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      dispatch(returnError(err.response.data, 'AUTH_ERROR'));\r\n      dispatch({ type: AUTH_ERROR });\r\n    });\r\n};\r\n\r\nexport const signIn = (userId) => {\r\n  return {\r\n    type: GOOGLE_SIGN_IN,\r\n    payload: userId,\r\n  };\r\n};\r\n\r\nexport const signOut = () => {\r\n  return {\r\n    type: GOOGLE_SIGN_OUT,\r\n  };\r\n};\r\n\r\nexport const login = (formValues) => {\r\n  return async (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n    const body = JSON.stringify(formValues);\r\n    await Axios.post('/api/users/login', body, config)\r\n      .then((res) => {\r\n        dispatch(getMessage(res.data.message, 'LOGIN_SUCCESS'));\r\n        dispatch({\r\n          type: LOGIN_SUCCESS,\r\n          payload: res.data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        dispatch(returnError(err.response.data.errorMessage, 'LOGIN_FAIL'));\r\n        dispatch({\r\n          type: LOGIN_FAIL,\r\n        });\r\n      });\r\n  };\r\n};\r\n\r\nexport const register = (formValues) => {\r\n  return (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    };\r\n\r\n    const body = JSON.stringify(formValues);\r\n    if (formValues.password !== formValues.repassword) {\r\n      dispatch(returnError('Password did not Match', 'REGISTER_FAIL'));\r\n      dispatch({\r\n        type: REGISTER_FAIL,\r\n      });\r\n    } else {\r\n      Axios.post('/api/users/register', body, config)\r\n        .then((res) => {\r\n          dispatch(getMessage(res.data.message, 'REGISTERSUCCESS'));\r\n          dispatch({\r\n            type: REGISTERSUCCESS,\r\n            payload: res.data,\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          dispatch(\r\n            returnError(err.response.data.errorMessage, 'REGISTER_FAIL')\r\n          );\r\n          dispatch({\r\n            type: REGISTER_FAIL,\r\n          });\r\n        });\r\n    }\r\n  };\r\n};\r\n\r\nexport const logout = () => (dispatch) => {\r\n  dispatch({ type: SIGN_OUT });\r\n};\r\n\r\nexport const configToken = (getState) => {\r\n  const token = getState().auth.token;\r\n\r\n  // Headers\r\n  const config = {\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n    },\r\n  };\r\n\r\n  //If Token, add to headers\r\n  if (token) {\r\n    config.headers['end_auth'] = token;\r\n  }\r\n\r\n  return config;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}